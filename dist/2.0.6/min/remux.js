(function(t,e){"use strict";var n=function n(){return e.qoopido.shared.module.initialize("remux",t,arguments)};"function"==typeof define&&define.amd?define(["./emitter"],n):n(e.qoopido.emitter)})(function(t,e,n,a){"use strict";var i,o,r=a.getElementsByTagName("html")[0],u=16,l={fontsize:null,layout:null,ratio:{}},s={fontsize:null,layout:null},d=null;return i=t.extend({_constructor:function(){var t=this,e=parseInt(r.getAttribute("data-base"),10),l=function l(){null!==d&&n.clearTimeout(d),d=n.setTimeout(function(){t.updateState()},20)};i._parent._constructor.call(t),isNaN(e)===!1&&(u=e),o=a.createElement("style"),o.type="text/css",a.getElementsByTagName("head")[0].appendChild(o),n.addEventListener("resize",l,!1),n.addEventListener("orientationchange",l,!1),t.updateState()},getState:function(){return l},updateState:function(){var t=this;return l.fontsize=parseInt(n.getComputedStyle(r).getPropertyValue("font-size"),10),l.layout=n.getComputedStyle(r,":after").getPropertyValue("content")||null,(l.fontsize!==s.fontsize||l.layout!==s.layout)&&(s.fontsize=l.fontsize,s.layout=l.layout,l.ratio.device=n.devicePixelRatio||1,l.ratio.fontsize=l.fontsize/u,l.ratio.total=l.ratio.device*l.ratio.fontsize,t.emit("statechange",l)),t},addLayout:function(t,e){var n,i,r,l,s,d,c=this;arguments.length>1?(n={},n[t]=e):n=arguments[0];for(i in n)for(r=n[i],l=r.min;r.max>=l;l++)s=Math.round(r.width*(l/u)),d="@media screen and (min-width: "+s+"px) { html { font-size: "+l+'px; } html:after { content: "'+i+'"; display: none; } }',o.styleSheet?o.styleSheet.cssText+=d:o.appendChild(a.createTextNode(d));return c.updateState(),c}})},window);