(function(t,e){"use strict";var n=function n(){return e.qoopido.shared.module.initialize("remux",t,arguments)};"function"==typeof define&&define.amd?define(["./emitter"],n):n(e.qoopido.emitter)})(function(t,e,n){"use strict";var a,i,o=n.getElementsByTagName("html")[0],r=16,u={fontsize:null,layout:null,ratio:{}},l={fontsize:null,layout:null},s=null;return a=t.extend({_constructor:function(){var t=this,u=parseInt(o.getAttribute("data-base"),10),l=function l(){null!==s&&e.clearTimeout(s),s=e.setTimeout(function(){t.updateState()},20)};a._parent._constructor.call(t),isNaN(u)===!1&&(r=u),i=n.createElement("style"),i.type="text/css",n.getElementsByTagName("head")[0].appendChild(i),e.addEventListener("resize",l,!1),e.addEventListener("orientationchange",l,!1),t.updateState()},getState:function(){return u},updateState:function(){var t=this;return u.fontsize=parseInt(e.getComputedStyle(o).getPropertyValue("font-size"),10),u.layout=e.getComputedStyle(o,":after").getPropertyValue("content")||null,(u.fontsize!==l.fontsize||u.layout!==l.layout)&&(l.fontsize=u.fontsize,l.layout=u.layout,u.ratio.device=e.devicePixelRatio||1,u.ratio.fontsize=u.fontsize/r,u.ratio.total=u.ratio.device*u.ratio.fontsize,t.emit("statechange",u)),t},addLayout:function(t,e){var a,o,u,l,s,d,c=this;arguments.length>1?(a={},a[t]=e):a=arguments[0];for(o in a)for(u=a[o],l=u.min;u.max>=l;l++)s=Math.round(u.width*(l/r)),d="@media screen and (min-width: "+s+"px) { html { font-size: "+l+'px; } html:after { content: "'+o+'"; display: none; } }',i.styleSheet?i.styleSheet.cssText+=d:i.appendChild(n.createTextNode(d));return c.updateState(),c}})},window);