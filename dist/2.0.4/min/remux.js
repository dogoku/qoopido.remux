(function(t,e){"use strict";var n="qoopido/remux",a=function a(){return e.qoopido.shared.prepareModule(n,t,arguments,!0)};"function"==typeof define&&define.amd?define(["./emitter"],a):a(e.qoopido.emitter)})(function(t,e,n){"use strict";var a,o,i=n.getElementsByTagName("html")[0],r=16,u={fontsize:null,layout:null,ratio:{}},s={fontsize:null,layout:null},l=null;return a=t.extend({_constructor:function(){var t=this,u=parseInt(i.getAttribute("data-base"),10),s=function s(){null!==l&&e.clearTimeout(l),l=e.setTimeout(function(){t.updateState()},20)};a._parent._constructor.call(t),isNaN(u)===!1&&(r=u),o=n.createElement("style"),o.type="text/css",n.getElementsByTagName("head")[0].appendChild(o),e.addEventListener("resize",s,!1),e.addEventListener("orientationchange",s,!1),t.updateState()},getState:function(){return u},updateState:function(){var t=this;return u.fontsize=parseInt(e.getComputedStyle(i).getPropertyValue("font-size"),10),u.layout=e.getComputedStyle(i,":after").getPropertyValue("content")||null,(u.fontsize!==s.fontsize||u.layout!==s.layout)&&(s.fontsize=u.fontsize,s.layout=u.layout,u.ratio.device=e.devicePixelRatio||1,u.ratio.fontsize=u.fontsize/r,u.ratio.total=u.ratio.device*u.ratio.fontsize,t.emit("statechange",u)),t},addLayout:function(t,e){var a,i,u,s,l,d,c=this;arguments.length>1?(a={},a[t]=e):a=arguments[0];for(i in a)for(u=a[i],s=u.min;u.max>=s;s++)l=Math.round(u.width*(s/r)),d="@media screen and (min-width: "+l+"px) { html { font-size: "+s+'px; } html:after { content: "'+i+'"; display: none; } }',o.styleSheet?o.styleSheet.cssText+=d:o.appendChild(n.createTextNode(d));return c.updateState(),c}})},window,document);